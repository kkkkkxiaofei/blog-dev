---
layout: post_layout
title:  "前端组件化思想"
date:   2018-02-06 20:02PM
categories: jekyll update
type: 2
summary: ""
icon: "js-icon.jpg"
---

### 1.开篇

先说说为什么要写这篇文章吧：不知从什么时候开始，大家信奉“每18个月，前端难度会增加一倍”的定律。我并不完全认可这个数字的可靠性，但是这句话的本意我还是非常肯定的。是的，前端越来越简单了，也越来越复杂了---简单到你可以一个github的starter搭建一个框架，集成所有的全家桶，包括部署以及发布，甚至你开发时使用的UI库都让你写不了几行css；可又复杂到如此多的框架和库，层出不穷，你还没来得及学会官网的doc呢，就已经有新的替代品了，那就更别提静下心去学习其中的源码或推敲其原理了。

正是前端飞速的发展使得前端不断的更新，看似简单，若想深入却实属不易。顺便提一句，去年6月底，ES8已经发布了，没错，你没看错，是不感觉学不动了（开玩笑了，其实也没更新啥，不会再有es5->es6这种跨度了）。

所以，我近期觉得使用的框架有些多了，得静下心来沉淀沉淀了---为什么要说写组件化思想呢，因为我觉得它是伴随着前端一起发展的一个不可或缺的设计细想，目前几大流行框架也都非常好的实现了，比如React,Vue，React之前用得算是比较多了，所以本篇我决定以Vue作为基础，对比React或其他框架，去谈一谈前端模块化，组件化，可维护化的设计细想。

### 2.什么是组件化

组件化并不是前端所特有的，一些其他的语言或者桌面程序等，有具有组件化的先例。确切的说，只要有UI层的展示，就必定有可以组件化的地方。简单来说，组件就是将一段UI样式和其对应的功能作为独立的整体去看待，无论这个整体放在哪里去使用，它都具有一样的功能和样式，从而实现复用，这种整体化的细想就是组件化。不难看出，组件化设计就是为了增加复用性，灵活性，提高系统设计，从而提高开发效率。

### 3.组件化的演变

如果你对JS的理解还停留在Jquery的话（Jquery本身是一个非常优秀的库），那么请跳过此文。在那个时候，大部分的前端开发应该都是十分过程式的开发：$操作dom，请求ajax，刷新数据，更新页面。这样的动作反反复复，甚至在同一个项目里同样的流程也许还要重复，其实jQuery本身也有有自己模块化的设计，有时我们也会用到类似jueryui等不错的库来减少工作量，但请注意，我这里是它是模块化的。

频繁操作dom，过程式的开发方式的确不怎么样。这是开始流行MV*，比如MVC，前端开始学习后端的思想，讲业务逻辑，ui，功能，可以按照不同的文件去划分，结构清晰，设计明了，开发起来也不错。在这个基础上，又有了更加不错的MVVM框架，它的出现，更加简化了前端的操作，并且将前端的ui赋予了真实意义：你所看到的任何ui，应该都对应其相应的viewmodel，即你看到的view就是真实的数据，并且实现了双向绑定，只要ui改变，ui所对应的数据也改变，反之亦然。这的确很方便，但大部分的mvvm框架，并没有实现组件化，或者说没有很好的实现组件化，因为MVVM最大的问题就是：

1.执行效率，只要数据改变，它地下所有的ui一般都会去更新，效率很低，如果你操作频繁，很可能调了几十万遍。
2.由于mvvm一般需要严格的viewmodel的作用域，因此大部分情况不支持多次绑定，或者只允许绑定一个根节点做为顶层dom渲染，这就给组件化带来了困难（不能独立的去绑定部分ui）。

上面有提到模块化，个人觉得如果更广义的来讲，模块化和组件化并不在一个维度上，模块化往往是代码的设计和项目结构的 设计；但很多时候在狭义的场景中，比如一个很通用的功能，也完全能够将其组件化或模块化，这两者此时十分相似，最大的区别就是组件往往需要实例化，并且应当赋有生命周期，而模块化往往是 直接引用。